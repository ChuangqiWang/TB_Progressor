"0","options(digits=2)"
"0","library(lubridate)"
"0",""
"0","ID.df <- unique(meta.data[, c(2, 3)])"
"0",""
"0","meta.data$VisitType.Cal <- array(NA, dim = dim(meta.data)[1])"
"0","for(index in 1 : dim(ID.df)[1]){"
"0","  temp.index <- which(ID.df[index, ]$ID == meta.data$ID)"
"0","  Pat.metadata <- meta.data[temp.index, ]"
"0","  min.date <- min(Pat.metadata$VisitDate)"
"0","  VisitType <- c()"
"0","  for(Pat.index in 1 : dim(Pat.metadata)[1]){"
"0","    temp.VisitType <- time_length(interval(min.date, Pat.metadata[Pat.index, ]$VisitDate),""month"")"
"0","    VisitType <- c(VisitType, temp.VisitType)"
"0","  }"
"0","  meta.data[temp.index, ]$VisitType.Cal <- VisitType"
"0","}"
"0",""
"0","meta.data$VisitType.Cal <- as.numeric(meta.data$VisitType.Cal)"
"0",""
"0","#saveRDS(meta.data, file.path(saved.dir, ""meta.data.VisitType.RDS""))"
